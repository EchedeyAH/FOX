name: Deploy and Test

on:
  push:
    branches:
      - main  # Cambia la rama si deseas otra

jobs:
  deploy_and_test:
      runs-on: self-hosted    
      steps:
      - name: Checkout
        uses: actions/checkout@v1

      - name: Ejecutar script de despliegue
        run: |
          echo "Hello world!"
          #echo "Ejecutando script de despliegue..."

      - name: Apagar el runner despu√©s del workflow
        run: |
          echo "Deteniendo el runner..."
          sudo systemctl stop $(systemctl list-units --type=service | grep actions.runner | awk '{print $1}')
        if: always
